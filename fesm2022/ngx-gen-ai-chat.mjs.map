{"version":3,"file":"ngx-gen-ai-chat.mjs","sources":["../../../projects/ai-chat/src/lib/services/cohere.service.ts","../../../projects/ai-chat/src/lib/store/ai-chat.store.ts","../../../projects/ai-chat/src/lib/components/message-list/message-list.component.ts","../../../projects/ai-chat/src/lib/components/message-input/message-input.component.ts","../../../projects/ai-chat/src/lib/components/chat-window/chat-window.component.ts","../../../projects/ai-chat/src/lib/components/chat-button/chat-button.component.ts","../../../projects/ai-chat/src/lib/ai-chat.component.ts","../../../projects/ai-chat/src/public-api.ts","../../../projects/ai-chat/src/ngx-gen-ai-chat.ts"],"sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { Observable, Subject } from 'rxjs';\r\n\r\nexport interface CohereConfig {\r\n    apiKey: string;\r\n    modelName: string;\r\n    systemPrompt: string;\r\n    apiUrl: string;\r\n    tools?: any[];\r\n    documents?: any[];\r\n}\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class CohereService {\r\n    private abortController: AbortController | null = null;\r\n    private toolCache = new Map<string, any>();\r\n\r\n    /**\r\n     * Stops the current active stream and clears the controller.\r\n     */\r\n    stopStream(): void {\r\n        this.abortController?.abort();\r\n        this.abortController = null;\r\n    }\r\n\r\n    /**\r\n     * Entry point to start a conversational response from Cohere.\r\n     */\r\n    generateResponse(config: CohereConfig, messages: any[]): Observable<string> {\r\n        this.stopStream();\r\n        this.abortController = new AbortController();\r\n        const subject = new Subject<string>();\r\n\r\n        const body = {\r\n            model: config.modelName,\r\n            messages,\r\n            stream: true,\r\n            tools: this.transformTools(config.tools),\r\n            documents: config.documents\r\n        };\r\n\r\n        this.processRequest(config, body, subject);\r\n        return subject.asObservable();\r\n    }\r\n\r\n    /**\r\n     * Handles the HTTP POST request and initiates stream reading.\r\n     */\r\n    private async processRequest(config: CohereConfig, body: any, subject: Subject<string>): Promise<void> {\r\n        try {\r\n            const response = await fetch(config.apiUrl, {\r\n                method: 'POST',\r\n                headers: {\r\n                    'Authorization': `Bearer ${config.apiKey}`,\r\n                    'Content-Type': 'application/json'\r\n                },\r\n                body: JSON.stringify(body),\r\n                signal: this.abortController?.signal\r\n            });\r\n\r\n            if (!response.ok) {\r\n                const errorText = await response.text();\r\n                throw new Error(`Cohere API Error ${response.status}: ${errorText}`);\r\n            }\r\n\r\n            if (!response.body) throw new Error('Response body is unavailable');\r\n            await this.readStream(response.body, config, body.messages, subject);\r\n\r\n        } catch (error: any) {\r\n            if (error.name === 'AbortError') {\r\n                subject.complete();\r\n            } else {\r\n                console.error('[CohereService] processRequest Error:', error);\r\n                subject.error(error);\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Reads and parses the NDJSON/SSE stream from the API.\r\n     */\r\n    private async readStream(\r\n        stream: ReadableStream<Uint8Array>,\r\n        config: CohereConfig,\r\n        previousMessages: any[],\r\n        subject: Subject<string>\r\n    ): Promise<void> {\r\n        const reader = stream.getReader();\r\n        const decoder = new TextDecoder();\r\n        const toolCallsMap = new Map<number, any>();\r\n        let buffer = '';\r\n        let currentEventType: string | null = null;\r\n\r\n        try {\r\n            while (true) {\r\n                const { done, value } = await reader.read();\r\n                if (done) break;\r\n\r\n                buffer += decoder.decode(value, { stream: true });\r\n                const lines = buffer.split('\\n');\r\n                buffer = lines.pop() || '';\r\n\r\n                for (const line of lines) {\r\n                    const trimmed = line.trim();\r\n                    if (!trimmed) continue;\r\n\r\n                    // Handle SSE event headers\r\n                    if (trimmed.startsWith('event:')) {\r\n                        currentEventType = trimmed.substring(6).trim();\r\n                        continue;\r\n                    }\r\n\r\n                    try {\r\n                        const cleanLine = trimmed.startsWith('data: ') ? trimmed.substring(6) : trimmed;\r\n                        if (!cleanLine.startsWith('{')) continue;\r\n\r\n                        const parsed = JSON.parse(cleanLine);\r\n                        const eventType = parsed.type || currentEventType;\r\n\r\n                        switch (eventType) {\r\n                            case 'content-delta':\r\n                            case 'text-generation':\r\n                                const text = parsed.delta?.message?.content?.text || parsed.text;\r\n                                if (text) subject.next(text);\r\n                                break;\r\n\r\n                            case 'tool-call-start':\r\n                                const deltaStart = parsed.delta?.message?.tool_calls;\r\n                                if (deltaStart) {\r\n                                    toolCallsMap.set(parsed.index, {\r\n                                        id: deltaStart.id,\r\n                                        name: deltaStart.function.name,\r\n                                        arguments: deltaStart.function.arguments || ''\r\n                                    });\r\n                                }\r\n                                break;\r\n\r\n                            case 'tool-call-delta':\r\n                                const deltaArgs = parsed.delta?.message?.tool_calls?.function?.arguments;\r\n                                const call = toolCallsMap.get(parsed.index);\r\n                                if (call && deltaArgs) call.arguments += deltaArgs;\r\n                                break;\r\n\r\n                            case 'message-end':\r\n                                const toolCalls = Array.from(toolCallsMap.values());\r\n                                if (toolCalls.length > 0) {\r\n                                    await this.handleToolCalls(toolCalls, parsed.message, config, previousMessages, subject);\r\n                                } else {\r\n                                    subject.complete();\r\n                                }\r\n                                reader.cancel();\r\n                                return;\r\n\r\n                            case 'stream-end':\r\n                                subject.complete();\r\n                                reader.cancel();\r\n                                return;\r\n                        }\r\n                    } catch (e) {\r\n                        console.warn('[CohereService] NDJSON Parse Warning:', e);\r\n                    }\r\n                }\r\n            }\r\n            subject.complete();\r\n        } finally {\r\n            reader.releaseLock();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Executes tool calls, collects results, and triggers the next conversational turn.\r\n     */\r\n    private async handleToolCalls(\r\n        toolCalls: any[],\r\n        assistantMessage: any,\r\n        config: CohereConfig,\r\n        previousMessages: any[],\r\n        subject: Subject<string>\r\n    ): Promise<void> {\r\n        const toolResults = await Promise.all(toolCalls.map(async (call) => {\r\n            const safeArgs = this.ensureJsonString(call.arguments);\r\n            const cacheKey = `${call.name}:${safeArgs}`;\r\n\r\n            // Check cache\r\n            if (this.toolCache.has(cacheKey)) {\r\n                return this.wrapToolResult(call.id, this.toolCache.get(cacheKey));\r\n            }\r\n\r\n            // Execute handler\r\n            const tool = config.tools?.find(t => t.name === call.name);\r\n            let result: any;\r\n            try {\r\n                if (!tool?.handler) throw new Error(`Tool handler for \"${call.name}\" not found`);\r\n                const params = JSON.parse(safeArgs);\r\n                result = await tool.handler(params);\r\n                result = Array.isArray(result) ? result : [result];\r\n                this.toolCache.set(cacheKey, result);\r\n            } catch (err) {\r\n                result = { error: String(err) };\r\n            }\r\n\r\n            return this.wrapToolResult(call.id, result);\r\n        }));\r\n\r\n        const nextBody = {\r\n            model: config.modelName,\r\n            messages: [\r\n                ...previousMessages,\r\n                {\r\n                    role: 'assistant',\r\n                    tool_calls: (assistantMessage?.tool_calls || toolCalls).map((tc: any) => ({\r\n                        id: tc.id || tc.tool_call_id,\r\n                        type: 'function',\r\n                        function: {\r\n                            name: tc.name || tc.function?.name,\r\n                            arguments: this.ensureJsonString(tc.arguments || tc.function?.arguments)\r\n                        }\r\n                    }))\r\n                },\r\n                ...toolResults\r\n            ],\r\n            stream: true,\r\n            tools: this.transformTools(config.tools)\r\n        };\r\n\r\n        await this.processRequest(config, nextBody, subject);\r\n    }\r\n\r\n    /** \r\n     * Helpers\r\n     */\r\n\r\n    private wrapToolResult(id: string, content: any) {\r\n        return { role: 'tool', tool_call_id: id, content: JSON.stringify(content) };\r\n    }\r\n\r\n    private transformTools(tools?: any[]): any[] | undefined {\r\n        if (!tools?.length) return undefined;\r\n        return tools.map(t => ({\r\n            type: 'function',\r\n            function: {\r\n                name: t.name,\r\n                description: t.description,\r\n                parameters: t.parameters || { type: 'object', properties: {}, required: [] }\r\n            }\r\n        }));\r\n    }\r\n\r\n    private ensureJsonString(val: any): string {\r\n        if (!val) return '{}';\r\n        if (typeof val !== 'string') return JSON.stringify(val);\r\n        const trimmed = val.trim();\r\n        if (!trimmed) return '{}';\r\n        try {\r\n            JSON.parse(trimmed);\r\n            return trimmed;\r\n        } catch {\r\n            return JSON.stringify(trimmed);\r\n        }\r\n    }\r\n}\r\n","import { computed, inject } from '@angular/core';\r\nimport { Subscription } from 'rxjs';\r\nimport {\r\n    signalStore,\r\n    withState,\r\n    withComputed,\r\n    withMethods,\r\n    patchState\r\n} from '@ngrx/signals';\r\nimport { ChatMessage } from '../models';\r\nimport { CohereService } from '../services/cohere.service';\r\n\r\nexport interface ModelConfig {\r\n    systemPrompt: string;\r\n    apiKey?: string;\r\n    modelName?: string;\r\n    apiUrl?: string;\r\n    tools?: any[];\r\n    documents?: any[];\r\n}\r\n\r\nexport interface DesignConfig {\r\n    mode?: 'embedded' | 'popover';\r\n    width?: string;\r\n    height?: string;\r\n    isDarkMode?: boolean;\r\n}\r\n\r\nexport interface ChatUIConfig {\r\n    userPhoto?: string;\r\n    inputPlaceholder?: string;\r\n    emptyChatTitle?: string;\r\n    emptyChatSubtitle?: string;\r\n    questionSuggestions?: string[];\r\n    startMessage?: string;\r\n    title?: string;\r\n}\r\n\r\nexport interface AiChatConfig {\r\n    model: ModelConfig;\r\n    design?: DesignConfig;\r\n    chat?: ChatUIConfig;\r\n}\r\n\r\nexport interface AiChatState extends Required<ModelConfig>, Required<DesignConfig>, Required<ChatUIConfig> {\r\n    // Chat State\r\n    messages: ChatMessage[];\r\n    isProcessing: boolean;\r\n    isOpen: boolean;\r\n\r\n    // UI\r\n    isLoading: boolean;\r\n    error: string | null;\r\n}\r\n\r\nconst initialState: AiChatState = {\r\n    // Model Defaults\r\n    apiKey: '',\r\n    modelName: 'command-r-08-2024',\r\n    systemPrompt: '',\r\n    apiUrl: 'https://api.cohere.com/v2/chat',\r\n    tools: [],\r\n    documents: [],\r\n\r\n    // Design Defaults\r\n    mode: 'embedded',\r\n    width: '600px',\r\n    height: '600px',\r\n    isDarkMode: false,\r\n\r\n    // Chat UI Defaults\r\n    userPhoto: 'https://ui-avatars.com/api/?name=User',\r\n    inputPlaceholder: '◊ë◊û◊î ◊†◊ô◊™◊ü ◊ú◊¢◊ñ◊ï◊®?',\r\n    emptyChatTitle: '◊î◊™◊ó◊ú ◊©◊ô◊ó◊î',\r\n    emptyChatSubtitle: '◊©◊ê◊ú ◊ê◊ï◊™◊ô ◊û◊©◊î◊ï...',\r\n    questionSuggestions: [],\r\n    startMessage: '◊î◊ô◊ô! ◊ê◊ô◊ö ◊ê◊§◊©◊® ◊ú◊¢◊ñ◊ï◊® ◊ú◊ö ◊î◊ô◊ï◊ù?',\r\n    title: 'AI Chat',\r\n\r\n    // Internal State\r\n    messages: [],\r\n    isProcessing: false,\r\n    isOpen: false,\r\n    isLoading: false,\r\n    error: null,\r\n};\r\n\r\nexport const AiChatStore = signalStore(\r\n    { providedIn: 'root' },\r\n    withState(initialState),\r\n\r\n    withComputed((store) => ({\r\n        isConfigured: computed(() => !!store.apiKey()),\r\n        displayMessages: computed(() => store.messages()),\r\n    })),\r\n\r\n    withMethods((store) => {\r\n        const cohereService = inject(CohereService);\r\n        let msgSubscription: Subscription | null = null;\r\n\r\n\r\n        const updateAssistantMsg = (id: string, update: Partial<ChatMessage>) => {\r\n            patchState(store, (state) => ({\r\n                messages: state.messages.map(m => m.id === id ? { ...m, ...update } : m)\r\n            }));\r\n        };\r\n\r\n        const appendToAssistantMsg = (id: string, chunk: string) => {\r\n            patchState(store, (state) => ({\r\n                messages: state.messages.map(m => m.id === id ? { ...m, content: m.content + chunk } : m)\r\n            }));\r\n        };\r\n\r\n        return {\r\n            updateConfig(config: AiChatConfig) {\r\n                const flatConfig: Partial<AiChatState> = {\r\n                    ...config.model,\r\n                    ...config.design,\r\n                    ...config.chat\r\n                };\r\n                patchState(store, flatConfig as any);\r\n            },\r\n\r\n            toggleTheme() {\r\n                const isDark = !store.isDarkMode();\r\n                patchState(store, { isDarkMode: isDark });\r\n            },\r\n\r\n            toggleChat: () => patchState(store, { isOpen: !store.isOpen() }),\r\n            setIsOpen: (isOpen: boolean) => patchState(store, { isOpen }),\r\n\r\n            clearChat: () => patchState(store, { messages: [] }),\r\n\r\n            stopRequest() {\r\n                if (msgSubscription) {\r\n                    msgSubscription.unsubscribe();\r\n                    msgSubscription = null;\r\n                }\r\n                cohereService.stopStream();\r\n\r\n                const messages = store.messages();\r\n                const lastIdx = messages.length - 1;\r\n                if (lastIdx >= 0 && messages[lastIdx].type === 'assistant') {\r\n                    const id = messages[lastIdx].id;\r\n                    appendToAssistantMsg(id, '\\n*(◊î◊ï◊§◊°◊ß ◊¢◊ú ◊ô◊ì◊ô ◊î◊û◊©◊™◊û◊©)*');\r\n                    updateAssistantMsg(id, { isTyping: false });\r\n                }\r\n                patchState(store, { isProcessing: false });\r\n            },\r\n\r\n            async processMessage(content: string) {\r\n                if (!content.trim() || store.isProcessing()) return;\r\n                patchState(store, { isProcessing: true });\r\n\r\n                const now = new Date();\r\n                const userMsg: ChatMessage = { type: 'user', content, id: crypto.randomUUID(), timestamp: now };\r\n                const assistantMsgId = crypto.randomUUID();\r\n                const assistantMsg: ChatMessage = { type: 'assistant', content: '', id: assistantMsgId, timestamp: now, isTyping: true };\r\n\r\n                patchState(store, { messages: [...store.messages(), userMsg, assistantMsg] });\r\n\r\n                const config = {\r\n                    apiKey: store.apiKey(),\r\n                    modelName: store.modelName(),\r\n                    systemPrompt: store.systemPrompt(),\r\n                    apiUrl: store.apiUrl(),\r\n                    tools: store.tools(),\r\n                    documents: store.documents(),\r\n                };\r\n\r\n                const history = [\r\n                    { role: 'system', content: store.systemPrompt() },\r\n                    ...store.messages().slice(0, -2).map(m => ({ role: m.type, content: m.content })),\r\n                    { role: 'user', content }\r\n                ];\r\n\r\n                msgSubscription = cohereService.generateResponse(config, history).subscribe({\r\n                    next: (chunk: string) => appendToAssistantMsg(assistantMsgId, chunk),\r\n                    error: (err: any) => {\r\n                        if (err.name === 'AbortError' || err.message?.toLowerCase().includes('abort')) return;\r\n                        console.error('[AiChatStore] Chat Error:', err);\r\n                        appendToAssistantMsg(assistantMsgId, '\\n[Error]');\r\n                        updateAssistantMsg(assistantMsgId, { isTyping: false });\r\n                        patchState(store, { isProcessing: false });\r\n                    },\r\n                    complete: () => {\r\n                        updateAssistantMsg(assistantMsgId, { isTyping: false });\r\n                        patchState(store, { isProcessing: false });\r\n                    }\r\n                });\r\n            },\r\n\r\n            initialize() {\r\n                if (store.startMessage() && store.messages().length === 0) {\r\n                    const startMsg = { type: 'assistant', content: store.startMessage(), id: crypto.randomUUID(), timestamp: new Date() } as ChatMessage;\r\n                    patchState(store, { messages: [startMsg] });\r\n                }\r\n            }\r\n        };\r\n    })\r\n);\r\n","import { Component, inject, ElementRef, ViewChild, AfterViewChecked, effect, ViewEncapsulation } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { AiChatStore } from '../../store/ai-chat.store';\r\n\r\n@Component({\r\n  selector: 'ai-message-list',\r\n  standalone: true,\r\n  imports: [CommonModule],\r\n  template: `\r\n    <div \r\n      #scrollContainer\r\n      class=\"h-full min-h-0 overflow-y-auto px-4 py-6 space-y-6 scroll-smooth transition-colors duration-300\"\r\n    >\r\n      <div class=\"max-w-4xl mx-auto\">\r\n        @for (message of store.messages(); track message.id) {\r\n          <div class=\"message-bubble mb-6\">\r\n            @if (message.type === 'user') {\r\n              <div class=\"flex gap-3 w-full justify-start\">\r\n                <div class=\"flex-shrink-0\">\r\n                    <img \r\n                      [src]=\"store.userPhoto()\" \r\n                      alt=\"User\"\r\n                      class=\"w-10 h-10 rounded-full ring-2 ring-black/10 dark:ring-white/20 shadow-md\"\r\n                    />\r\n                </div>\r\n                <div class=\"max-w-[80%] bg-white dark:bg-gradient-to-br dark:from-neural-600 dark:to-neural-700 rounded-2xl rounded-tr-sm px-5 py-3 shadow-lg border border-black/5 dark:border-transparent\">\r\n                  <p class=\"text-gray-800 dark:text-white whitespace-pre-wrap\">{{ message.content }}</p>\r\n                  <p class=\"text-xs text-gray-500 dark:text-neural-300 mt-2 opacity-70\">{{ formatTime(message.timestamp) }}</p>\r\n                </div>\r\n              </div>\r\n            } @else if (message.isTyping && !message.content) {\r\n              <div class=\"flex gap-3 w-full justify-end\">\r\n                <div class=\"inline-block bg-white dark:bg-deep-800/60 backdrop-blur-xl rounded-2xl rounded-tl-sm px-5 py-4 shadow-lg border border-black/5 dark:border-white/5\">\r\n                  <div class=\"flex gap-1.5\">\r\n                    <div class=\"w-2.5 h-2.5 rounded-full bg-synapse-400 animate-bounce\" style=\"animation-delay: 0ms\"></div>\r\n                    <div class=\"w-2.5 h-2.5 rounded-full bg-neural-400 animate-bounce\" style=\"animation-delay: 150ms\"></div>\r\n                    <div class=\"w-2.5 h-2.5 rounded-full bg-matrix-400 animate-bounce\" style=\"animation-delay: 300ms\"></div>\r\n                  </div>\r\n                </div>\r\n                <div class=\"flex-shrink-0\">\r\n                  <div class=\"w-10 h-10 rounded-full bg-gradient-to-br from-synapse-500 to-neural-500 flex items-center justify-center shadow-lg\">\r\n                    <span class=\"text-lg\">ü§ñ</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            } @else {\r\n              <div class=\"flex gap-3 w-full justify-end\">\r\n                <div class=\"max-w-[85%] bg-white dark:bg-deep-800/60 backdrop-blur-xl rounded-2xl rounded-tl-sm px-5 py-4 shadow-lg border border-black/5 dark:border-white/5\">\r\n                  <div \r\n                    class=\"text-gray-800 dark:text-gray-100 whitespace-pre-wrap prose prose-sm dark:prose-invert max-w-none\"\r\n                    [innerHTML]=\"formatMessage(message.content)\"\r\n                  ></div>\r\n                  <p class=\"text-xs text-gray-500 mt-3\">{{ formatTime(message.timestamp) }}</p>\r\n                </div>\r\n                <div class=\"flex-shrink-0\">\r\n                  <div class=\"w-10 h-10 rounded-full bg-gradient-to-br from-synapse-500 to-neural-500 flex items-center justify-center shadow-lg shadow-synapse-500/25\">\r\n                    <span class=\"text-lg\">ü§ñ</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n            }\r\n          </div>\r\n        } @empty {\r\n          <div class=\"flex flex-col items-center justify-center h-full py-20 text-center\">\r\n            <div class=\"w-20 h-20 rounded-2xl bg-black/5 dark:bg-neural-500/20 flex items-center justify-center mb-6\">\r\n              <span class=\"text-4xl\">üí¨</span>\r\n            </div>\r\n            <h3 class=\"text-xl font-semibold mb-2 gradient-text\">{{ store.emptyChatTitle() }}</h3>\r\n            <p class=\"text-gray-500 max-w-sm\">{{ store.emptyChatSubtitle() }}</p>\r\n          </div>\r\n        }\r\n      </div>\r\n    </div>\r\n  `,\r\n  encapsulation: ViewEncapsulation.None,\r\n  styles: [`\r\n    :host {\r\n      display: block;\r\n      height: 100%;\r\n      width: 100%;\r\n      flex: 1;\r\n      overflow: hidden;\r\n    }\r\n  `]\r\n})\r\nexport class MessageListComponent implements AfterViewChecked {\r\n  protected readonly store = inject(AiChatStore);\r\n\r\n  @ViewChild('scrollContainer') private scrollContainer!: ElementRef;\r\n  private shouldScroll = true;\r\n\r\n  constructor() {\r\n    effect(() => {\r\n      const messages = this.store.messages();\r\n      if (messages.length > 0) {\r\n        this.shouldScroll = true;\r\n      }\r\n    });\r\n  }\r\n\r\n  ngAfterViewChecked(): void {\r\n    if (this.shouldScroll) {\r\n      this.scrollToBottom();\r\n      this.shouldScroll = false;\r\n    }\r\n  }\r\n\r\n  private scrollToBottom(): void {\r\n    try {\r\n      const container = this.scrollContainer?.nativeElement;\r\n      if (container) {\r\n        container.scrollTop = container.scrollHeight;\r\n      }\r\n    } catch (err) {\r\n      console.error('Scroll error:', err);\r\n    }\r\n  }\r\n\r\n  protected formatTime(date: Date): string {\r\n    return new Date(date).toLocaleTimeString('en-US', {\r\n      hour: '2-digit',\r\n      minute: '2-digit',\r\n      hour12: false,\r\n    });\r\n  }\r\n\r\n  protected formatMessage(content: string): string {\r\n    return content\r\n      .replace(/\\*\\*(.*?)\\*\\*/g, '<strong>$1</strong>')\r\n      .replace(/\\n/g, '<br>')\r\n      .replace(/^‚Ä¢ /gm, '<span class=\"text-neural-400\">‚Ä¢</span> ')\r\n      .replace(/([\\u{1F300}-\\u{1F9FF}])/gu, '<span class=\"text-2xl align-middle\">$1</span>');\r\n  }\r\n}\r\n","import { Component, inject, signal, ElementRef, ViewChild, effect, ViewEncapsulation } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\nimport { AiChatStore } from '../../store/ai-chat.store';\r\n\r\n@Component({\r\n  selector: 'ai-message-input',\r\n  standalone: true,\r\n  imports: [CommonModule, FormsModule],\r\n  template: `\r\n    <div class=\"max-w-4xl mx-auto\">\r\n      <form (submit)=\"onSubmit($event)\" class=\"relative\">\r\n        <div class=\"relative group\">\r\n          <div \r\n            class=\"absolute -inset-1 bg-gradient-to-r from-neural-500/20 via-synapse-500/20 to-matrix-500/20 rounded-2xl blur-lg opacity-0 group-focus-within:opacity-100 transition-opacity duration-500\"\r\n          ></div>\r\n          \r\n          <div class=\"relative flex items-end gap-3 bg-white dark:bg-deep-700/50 rounded-2xl border border-black/10 dark:border-white/10 focus-within:border-neural-500/50 transition-all duration-300 p-2 shadow-lg\">\r\n            \r\n            <div class=\"flex-1 relative\">\r\n              <textarea\r\n                #inputField\r\n                [(ngModel)]=\"inputValue\"\r\n                name=\"message\"\r\n                [placeholder]=\"store.inputPlaceholder()\"\r\n                [readonly]=\"store.isProcessing()\"\r\n                (keydown)=\"onKeyDown($event)\"\r\n                rows=\"1\"\r\n                class=\"w-full bg-transparent border-none outline-none resize-none text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 px-4 py-3 max-h-32 min-h-[48px]\"\r\n                [class.opacity-50]=\"store.isProcessing()\"\r\n                [class.cursor-not-allowed]=\"store.isProcessing()\"\r\n              ></textarea>\r\n            </div>\r\n\r\n            <div class=\"flex items-center gap-2 pb-2 pl-2\">\r\n              <div class=\"relative\">\r\n              @if (store.questionSuggestions().length > 0) {\r\n                <button \r\n                  type=\"button\"\r\n                  (click)=\"showSuggestions.set(!showSuggestions())\"\r\n                  class=\"p-2 rounded-lg hover:bg-black/5 dark:hover:bg-white/10 transition-colors text-gray-400 dark:text-gray-500 hover:text-neural-600 dark:hover:text-white\"\r\n                  title=\"◊©◊ê◊ú◊ï◊™ ◊ú◊ì◊ï◊í◊û◊î\"\r\n                >\r\n                  <svg class=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" \r\n                          d=\"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z\"/>\r\n                  </svg>\r\n                </button>\r\n              }\r\n                @if (showSuggestions()) {\r\n                  <div \r\n                    class=\"absolute bottom-full left-0 mb-2 w-72 bg-white dark:bg-deep-800/80 backdrop-blur-xl rounded-xl border border-black/10 dark:border-white/10 shadow-2xl overflow-hidden z-10\"\r\n                  >\r\n                    <div class=\"p-3 border-b border-black/5 dark:border-white/10 bg-slate-50 dark:bg-transparent\">\r\n                      <p class=\"text-xs font-semibold uppercase tracking-wider text-gray-400\">◊©◊ê◊ú◊ï◊™ ◊ú◊ì◊ï◊í◊û◊î</p>\r\n                    </div>\r\n                    <div class=\"p-2 space-y-1\">\r\n                      @for (suggestion of store.questionSuggestions(); track suggestion) {\r\n                        <button\r\n                          type=\"button\"\r\n                          (click)=\"useSuggestion(suggestion)\"\r\n                          class=\"w-full text-right px-3 py-2 rounded-lg text-sm hover:bg-neural-50 dark:hover:bg-white/10 transition-colors text-gray-600 dark:text-gray-300 hover:text-neural-600 dark:hover:text-white\"\r\n                        >\r\n                          {{ suggestion }}\r\n                        </button>\r\n                      }\r\n                    </div>\r\n                  </div>\r\n                }\r\n              </div>\r\n\r\n              @if (store.isProcessing()) {\r\n                <button\r\n                  type=\"button\"\r\n                  (click)=\"onStop()\"\r\n                  class=\"p-3 rounded-xl bg-rose-500 text-white shadow-lg shadow-rose-500/30 \r\n                         hover:bg-rose-400 hover:shadow-rose-500/50\r\n                         transition-all duration-300 group flex items-center justify-center\"\r\n                  title=\"Stop generating\"\r\n                >\r\n                  <svg class=\"w-5 h-5\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                    <rect x=\"6\" y=\"6\" width=\"12\" height=\"12\" rx=\"2\" />\r\n                  </svg>\r\n                </button>\r\n              } @else {\r\n                <button\r\n                  type=\"submit\"\r\n                  [disabled]=\"!inputValue().trim()\"\r\n                  class=\"p-3 rounded-xl bg-gradient-to-r from-neural-500 to-synapse-500 text-white shadow-lg shadow-neural-500/30 \r\n                         disabled:opacity-50 disabled:cursor-not-allowed disabled:shadow-none\r\n                         hover:from-neural-400 hover:to-synapse-400 hover:shadow-neural-500/50\r\n                         transition-all duration-300 group\"\r\n                >\r\n                  <svg class=\"w-5 h-5 flip-x-rtl\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\r\n                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 19l9 2-9-18-9 18 9-2zm0 0v-8\"/>\r\n                  </svg>\r\n                </button>\r\n              }\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <div class=\"flex justify-between items-center mt-2 px-2\">\r\n          <p class=\"text-xs text-gray-400\">\r\n            <kbd class=\"px-1.5 py-0.5 rounded bg-black/5 dark:bg-white/5 border border-black/10 dark:border-white/10 text-gray-400\">Enter</kbd>\r\n            ◊ú◊©◊ú◊ô◊ó◊î \r\n            <kbd class=\"px-1.5 py-0.5 rounded bg-black/5 dark:bg-white/5 border border-black/10 dark:border-white/10 text-gray-400 mr-2\">Shift+Enter</kbd>\r\n            ◊ú◊©◊ï◊®◊î ◊ó◊ì◊©◊î\r\n          </p>\r\n          \r\n          @if (store.isProcessing()) {\r\n            <p class=\"text-xs text-synapse-500 dark:text-synapse-400 flex items-center gap-1\">\r\n              <span class=\"w-1.5 h-1.5 rounded-full bg-synapse-500 dark:bg-synapse-400 animate-pulse\"></span>\r\n              ◊û◊¢◊ë◊ì ◊ë◊ß◊©◊î...\r\n            </p>\r\n          }\r\n        </div>\r\n      </form>\r\n    </div>\r\n  `,\r\n  encapsulation: ViewEncapsulation.None,\r\n  styles: [`\r\n    :host {\r\n      display: block;\r\n    }\r\n  `]\r\n})\r\nexport class MessageInputComponent {\r\n  protected readonly store = inject(AiChatStore);\r\n  @ViewChild('inputField') private inputField!: ElementRef<HTMLTextAreaElement>;\r\n\r\n  protected inputValue = signal('');\r\n  protected showSuggestions = signal(false);\r\n\r\n  constructor() {\r\n    effect(() => {\r\n      if (!this.store.isProcessing()) {\r\n        setTimeout(() => this.inputField?.nativeElement?.focus(), 0);\r\n      }\r\n    });\r\n  }\r\n\r\n  protected onSubmit(event: Event): void {\r\n    event.preventDefault();\r\n    this.sendMessage();\r\n  }\r\n\r\n  protected onKeyDown(event: KeyboardEvent): void {\r\n    if (event.key === 'Enter' && !event.shiftKey) {\r\n      event.preventDefault();\r\n      this.sendMessage();\r\n    }\r\n  }\r\n\r\n  protected onStop(): void {\r\n    this.store.stopRequest();\r\n  }\r\n\r\n  protected useSuggestion(suggestion: string): void {\r\n    this.inputValue.set(suggestion);\r\n    this.showSuggestions.set(false);\r\n    this.inputField?.nativeElement?.focus();\r\n  }\r\n\r\n  private sendMessage(): void {\r\n    const value = this.inputValue().trim();\r\n    if (!value || this.store.isProcessing()) return;\r\n\r\n    this.store.processMessage(value);\r\n    this.inputValue.set('');\r\n\r\n    if (this.inputField?.nativeElement) {\r\n      this.inputField.nativeElement.style.height = 'auto';\r\n    }\r\n  }\r\n}\r\n","import { Component, inject, ViewEncapsulation } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { AiChatStore } from '../../store/ai-chat.store';\r\nimport { MessageListComponent } from '../message-list/message-list.component';\r\nimport { MessageInputComponent } from '../message-input/message-input.component';\r\n\r\n@Component({\r\n  selector: 'ai-chat-window',\r\n  standalone: true,\r\n  imports: [CommonModule, MessageListComponent, MessageInputComponent],\r\n  template: `\r\n    <div class=\"flex-1 flex flex-col h-full\">\r\n      <div class=\"flex-1 min-h-0 overflow-hidden\">\r\n        <ai-message-list />\r\n      </div>\r\n      \r\n      <div class=\"border-t border-black/5 dark:border-white/5 p-4 bg-slate-200/50 dark:bg-deep-800/50 transition-colors duration-300\">\r\n        <ai-message-input />\r\n      </div>\r\n    </div>\r\n  `,\r\n  encapsulation: ViewEncapsulation.None,\r\n  styles: [`\r\n    :host {\r\n      display: flex;\r\n      flex-direction: column;\r\n      height: 100%;\r\n      width: 100%;\r\n      flex: 1;\r\n    }\r\n  `]\r\n})\r\nexport class ChatWindowComponent {\r\n  protected readonly store = inject(AiChatStore);\r\n}\r\n","import { Component, inject, ViewEncapsulation } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { AiChatStore } from '../../store/ai-chat.store';\r\n\r\n@Component({\r\n  selector: 'ai-chat-button',\r\n  standalone: true,\r\n  imports: [CommonModule],\r\n  template: `\r\n    <button\r\n      (click)=\"store.toggleChat()\"\r\n      class=\"w-16 h-16 rounded-full bg-gradient-to-br from-synapse-500 to-neural-500 flex items-center justify-center shadow-2xl hover:scale-110 active:scale-95 transition-all duration-300 group relative ring-4 ring-white/10 dark:ring-black/20 overflow-hidden\"\r\n      [attr.aria-label]=\"store.isOpen() ? '◊°◊í◊ï◊® ◊¶◊ê◊ò' : '◊§◊™◊ó ◊¶◊ê◊ò'\"\r\n    >\r\n      <div class=\"absolute inset-0 rounded-full bg-synapse-400 opacity-20 group-hover:animate-ping\"></div>\r\n      \r\n      <div class=\"relative w-8 h-8 flex items-center justify-center\">\r\n        <svg \r\n          xmlns=\"http://www.w3.org/2000/svg\" \r\n          class=\"w-8 h-8 text-white absolute transition-all duration-500 ease-out\"\r\n          [class.opacity-0]=\"!store.isOpen()\"\r\n          [class.scale-50]=\"!store.isOpen()\"\r\n          [class.rotate-90]=\"!store.isOpen()\"\r\n          [class.opacity-100]=\"store.isOpen()\"\r\n          [class.scale-100]=\"store.isOpen()\"\r\n          [class.rotate-0]=\"store.isOpen()\"\r\n          fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"\r\n        >\r\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M6 18L18 6M6 6l12 12\" />\r\n        </svg>\r\n\r\n        <svg \r\n          xmlns=\"http://www.w3.org/2000/svg\" \r\n          class=\"w-8 h-8 text-white absolute transition-all duration-500 ease-out\"\r\n          [class.opacity-100]=\"!store.isOpen()\"\r\n          [class.scale-100]=\"!store.isOpen()\"\r\n          [class.rotate-0]=\"!store.isOpen()\"\r\n          [class.opacity-0]=\"store.isOpen()\"\r\n          [class.scale-50]=\"store.isOpen()\"\r\n          [class.rotate-[-90deg]]=\"store.isOpen()\"\r\n          fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"\r\n        >\r\n          <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z\" />\r\n        </svg>\r\n      </div>\r\n    </button>\r\n  `,\r\n  encapsulation: ViewEncapsulation.None,\r\n  styles: [`\r\n    :host {\r\n      display: block;\r\n    }\r\n  `]\r\n})\r\nexport class ChatButtonComponent {\r\n  protected readonly store = inject(AiChatStore);\r\n}\r\n","import { Component, inject, Input, OnInit, ViewEncapsulation } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { trigger, transition, style, animate } from '@angular/animations';\r\nimport { AiChatStore, AiChatConfig } from './store/ai-chat.store';\r\nimport { ChatWindowComponent } from './components/chat-window/chat-window.component';\r\nimport { ChatButtonComponent } from './components/chat-button/chat-button.component';\r\n\r\n@Component({\r\n  selector: 'ai-chat',\r\n  standalone: true,\r\n  imports: [\r\n    CommonModule,\r\n    ChatWindowComponent,\r\n    ChatButtonComponent\r\n  ],\r\n  encapsulation: ViewEncapsulation.None,\r\n  animations: [\r\n    trigger('popoverScale', [\r\n      transition(':enter', [\r\n        style({ opacity: 0, transform: 'scale(0.8) translateY(40px)', transformOrigin: 'bottom left' }),\r\n        animate('400ms cubic-bezier(0.34, 1.56, 0.64, 1)',\r\n          style({ opacity: 1, transform: 'scale(1) translateY(0)' }))\r\n      ]),\r\n      transition(':leave', [\r\n        animate('300ms cubic-bezier(0.4, 0, 0.2, 1)',\r\n          style({ opacity: 0, transform: 'scale(0.8) translateY(40px)', transformOrigin: 'bottom left' }))\r\n      ])\r\n    ])\r\n  ],\r\n  template: `\r\n    <div [class.dark]=\"store.isDarkMode()\" class=\"h-full flex flex-col\">\r\n      @if (store.mode() === 'embedded') {\r\n        <div \r\n          class=\"h-full min-h-0 bg-slate-50 dark:bg-deep-900 bg-mesh-gradient flex flex-col overflow-hidden transition-colors duration-300 rounded-inherit\"\r\n        >\r\n          <ai-chat-window class=\"flex-1 min-h-0\" />\r\n        </div>\r\n      } @else {\r\n        <!-- Popover Mode -->\r\n        <div class=\"fixed bottom-8 left-8 z-[9999] flex flex-col items-end gap-4 pointer-events-none\">\r\n          @if (store.isOpen()) {\r\n            <div \r\n              @popoverScale\r\n              [style.width]=\"store.width()\"\r\n              [style.height]=\"store.height()\"\r\n              class=\"max-h-[calc(100vh-120px)] bg-white dark:bg-deep-900 rounded-3xl shadow-2xl overflow-hidden border border-black/5 dark:border-white/10 flex flex-col pointer-events-auto origin-bottom-left\"\r\n            >\r\n              <!-- Popover Header -->\r\n              <div class=\"p-4 border-b border-black/5 dark:border-white/5 bg-gradient-to-r from-synapse-500/10 to-neural-500/10 flex items-center justify-between\">\r\n                <div class=\"flex items-center gap-3\">\r\n                  <div class=\"w-8 h-8 rounded-full bg-gradient-to-br from-synapse-500 to-neural-500 flex items-center justify-center\">\r\n                    <span class=\"text-sm\">ü§ñ</span>\r\n                  </div>\r\n                  <span class=\"font-semibold text-gray-800 dark:text-white\">{{ store.title() }}</span>\r\n                </div>\r\n                <button (click)=\"store.toggleChat()\" class=\"p-2 hover:bg-black/5 dark:hover:bg-white/5 rounded-full text-gray-500 transition-colors\">\r\n                  <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"w-5 h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                    <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 9l-7 7-7-7\" />\r\n                  </svg>\r\n                </button>\r\n              </div>\r\n\r\n              <div class=\"flex-1 overflow-hidden\">\r\n                <ai-chat-window />\r\n              </div>\r\n            </div>\r\n          }\r\n          \r\n          <div class=\"pointer-events-auto\">\r\n            <ai-chat-button />\r\n          </div>\r\n        </div>\r\n      }\r\n    </div>\r\n  `,\r\n  styles: [`\r\n    :host {\r\n      display: block;\r\n      height: 100%;\r\n      width: 100%;\r\n    }\r\n  `]\r\n})\r\nexport class AiChatComponent implements OnInit {\r\n  protected readonly store = inject(AiChatStore);\r\n\r\n  @Input({ required: true }) set config(value: AiChatConfig) {\r\n    this.store.updateConfig(value);\r\n  }\r\n\r\n  ngOnInit(): void {\r\n    this.store.initialize();\r\n  }\r\n}\r\n","/*\r\n * Public API Surface of ai-chat\r\n */\r\n\r\nexport * from './lib/services/cohere.service';\r\nexport * from './lib/store/ai-chat.store';\r\nexport * from './lib/models';\r\nexport * from './lib/ai-chat.component';\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public-api';\n"],"names":[],"mappings":";;;;;;;;;MAaa,aAAa,CAAA;IACd,eAAe,GAA2B,IAAI;AAC9C,IAAA,SAAS,GAAG,IAAI,GAAG,EAAe;AAE1C;;AAEG;IACH,UAAU,GAAA;AACN,QAAA,IAAI,CAAC,eAAe,EAAE,KAAK,EAAE;AAC7B,QAAA,IAAI,CAAC,eAAe,GAAG,IAAI;IAC/B;AAEA;;AAEG;IACH,gBAAgB,CAAC,MAAoB,EAAE,QAAe,EAAA;QAClD,IAAI,CAAC,UAAU,EAAE;AACjB,QAAA,IAAI,CAAC,eAAe,GAAG,IAAI,eAAe,EAAE;AAC5C,QAAA,MAAM,OAAO,GAAG,IAAI,OAAO,EAAU;AAErC,QAAA,MAAM,IAAI,GAAG;YACT,KAAK,EAAE,MAAM,CAAC,SAAS;YACvB,QAAQ;AACR,YAAA,MAAM,EAAE,IAAI;YACZ,KAAK,EAAE,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,KAAK,CAAC;YACxC,SAAS,EAAE,MAAM,CAAC;SACrB;QAED,IAAI,CAAC,cAAc,CAAC,MAAM,EAAE,IAAI,EAAE,OAAO,CAAC;AAC1C,QAAA,OAAO,OAAO,CAAC,YAAY,EAAE;IACjC;AAEA;;AAEG;AACK,IAAA,MAAM,cAAc,CAAC,MAAoB,EAAE,IAAS,EAAE,OAAwB,EAAA;AAClF,QAAA,IAAI;YACA,MAAM,QAAQ,GAAG,MAAM,KAAK,CAAC,MAAM,CAAC,MAAM,EAAE;AACxC,gBAAA,MAAM,EAAE,MAAM;AACd,gBAAA,OAAO,EAAE;AACL,oBAAA,eAAe,EAAE,CAAA,OAAA,EAAU,MAAM,CAAC,MAAM,CAAA,CAAE;AAC1C,oBAAA,cAAc,EAAE;AACnB,iBAAA;AACD,gBAAA,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC;AAC1B,gBAAA,MAAM,EAAE,IAAI,CAAC,eAAe,EAAE;AACjC,aAAA,CAAC;AAEF,YAAA,IAAI,CAAC,QAAQ,CAAC,EAAE,EAAE;AACd,gBAAA,MAAM,SAAS,GAAG,MAAM,QAAQ,CAAC,IAAI,EAAE;gBACvC,MAAM,IAAI,KAAK,CAAC,CAAA,iBAAA,EAAoB,QAAQ,CAAC,MAAM,CAAA,EAAA,EAAK,SAAS,CAAA,CAAE,CAAC;YACxE;YAEA,IAAI,CAAC,QAAQ,CAAC,IAAI;AAAE,gBAAA,MAAM,IAAI,KAAK,CAAC,8BAA8B,CAAC;AACnE,YAAA,MAAM,IAAI,CAAC,UAAU,CAAC,QAAQ,CAAC,IAAI,EAAE,MAAM,EAAE,IAAI,CAAC,QAAQ,EAAE,OAAO,CAAC;QAExE;QAAE,OAAO,KAAU,EAAE;AACjB,YAAA,IAAI,KAAK,CAAC,IAAI,KAAK,YAAY,EAAE;gBAC7B,OAAO,CAAC,QAAQ,EAAE;YACtB;iBAAO;AACH,gBAAA,OAAO,CAAC,KAAK,CAAC,uCAAuC,EAAE,KAAK,CAAC;AAC7D,gBAAA,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC;YACxB;QACJ;IACJ;AAEA;;AAEG;IACK,MAAM,UAAU,CACpB,MAAkC,EAClC,MAAoB,EACpB,gBAAuB,EACvB,OAAwB,EAAA;AAExB,QAAA,MAAM,MAAM,GAAG,MAAM,CAAC,SAAS,EAAE;AACjC,QAAA,MAAM,OAAO,GAAG,IAAI,WAAW,EAAE;AACjC,QAAA,MAAM,YAAY,GAAG,IAAI,GAAG,EAAe;QAC3C,IAAI,MAAM,GAAG,EAAE;QACf,IAAI,gBAAgB,GAAkB,IAAI;AAE1C,QAAA,IAAI;YACA,OAAO,IAAI,EAAE;gBACT,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,GAAG,MAAM,MAAM,CAAC,IAAI,EAAE;AAC3C,gBAAA,IAAI,IAAI;oBAAE;AAEV,gBAAA,MAAM,IAAI,OAAO,CAAC,MAAM,CAAC,KAAK,EAAE,EAAE,MAAM,EAAE,IAAI,EAAE,CAAC;gBACjD,MAAM,KAAK,GAAG,MAAM,CAAC,KAAK,CAAC,IAAI,CAAC;AAChC,gBAAA,MAAM,GAAG,KAAK,CAAC,GAAG,EAAE,IAAI,EAAE;AAE1B,gBAAA,KAAK,MAAM,IAAI,IAAI,KAAK,EAAE;AACtB,oBAAA,MAAM,OAAO,GAAG,IAAI,CAAC,IAAI,EAAE;AAC3B,oBAAA,IAAI,CAAC,OAAO;wBAAE;;AAGd,oBAAA,IAAI,OAAO,CAAC,UAAU,CAAC,QAAQ,CAAC,EAAE;wBAC9B,gBAAgB,GAAG,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,IAAI,EAAE;wBAC9C;oBACJ;AAEA,oBAAA,IAAI;wBACA,MAAM,SAAS,GAAG,OAAO,CAAC,UAAU,CAAC,QAAQ,CAAC,GAAG,OAAO,CAAC,SAAS,CAAC,CAAC,CAAC,GAAG,OAAO;AAC/E,wBAAA,IAAI,CAAC,SAAS,CAAC,UAAU,CAAC,GAAG,CAAC;4BAAE;wBAEhC,MAAM,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,SAAS,CAAC;AACpC,wBAAA,MAAM,SAAS,GAAG,MAAM,CAAC,IAAI,IAAI,gBAAgB;wBAEjD,QAAQ,SAAS;AACb,4BAAA,KAAK,eAAe;AACpB,4BAAA,KAAK,iBAAiB;AAClB,gCAAA,MAAM,IAAI,GAAG,MAAM,CAAC,KAAK,EAAE,OAAO,EAAE,OAAO,EAAE,IAAI,IAAI,MAAM,CAAC,IAAI;AAChE,gCAAA,IAAI,IAAI;AAAE,oCAAA,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC;gCAC5B;AAEJ,4BAAA,KAAK,iBAAiB;gCAClB,MAAM,UAAU,GAAG,MAAM,CAAC,KAAK,EAAE,OAAO,EAAE,UAAU;gCACpD,IAAI,UAAU,EAAE;AACZ,oCAAA,YAAY,CAAC,GAAG,CAAC,MAAM,CAAC,KAAK,EAAE;wCAC3B,EAAE,EAAE,UAAU,CAAC,EAAE;AACjB,wCAAA,IAAI,EAAE,UAAU,CAAC,QAAQ,CAAC,IAAI;AAC9B,wCAAA,SAAS,EAAE,UAAU,CAAC,QAAQ,CAAC,SAAS,IAAI;AAC/C,qCAAA,CAAC;gCACN;gCACA;AAEJ,4BAAA,KAAK,iBAAiB;AAClB,gCAAA,MAAM,SAAS,GAAG,MAAM,CAAC,KAAK,EAAE,OAAO,EAAE,UAAU,EAAE,QAAQ,EAAE,SAAS;gCACxE,MAAM,IAAI,GAAG,YAAY,CAAC,GAAG,CAAC,MAAM,CAAC,KAAK,CAAC;gCAC3C,IAAI,IAAI,IAAI,SAAS;AAAE,oCAAA,IAAI,CAAC,SAAS,IAAI,SAAS;gCAClD;AAEJ,4BAAA,KAAK,aAAa;gCACd,MAAM,SAAS,GAAG,KAAK,CAAC,IAAI,CAAC,YAAY,CAAC,MAAM,EAAE,CAAC;AACnD,gCAAA,IAAI,SAAS,CAAC,MAAM,GAAG,CAAC,EAAE;AACtB,oCAAA,MAAM,IAAI,CAAC,eAAe,CAAC,SAAS,EAAE,MAAM,CAAC,OAAO,EAAE,MAAM,EAAE,gBAAgB,EAAE,OAAO,CAAC;gCAC5F;qCAAO;oCACH,OAAO,CAAC,QAAQ,EAAE;gCACtB;gCACA,MAAM,CAAC,MAAM,EAAE;gCACf;AAEJ,4BAAA,KAAK,YAAY;gCACb,OAAO,CAAC,QAAQ,EAAE;gCAClB,MAAM,CAAC,MAAM,EAAE;gCACf;;oBAEZ;oBAAE,OAAO,CAAC,EAAE;AACR,wBAAA,OAAO,CAAC,IAAI,CAAC,uCAAuC,EAAE,CAAC,CAAC;oBAC5D;gBACJ;YACJ;YACA,OAAO,CAAC,QAAQ,EAAE;QACtB;gBAAU;YACN,MAAM,CAAC,WAAW,EAAE;QACxB;IACJ;AAEA;;AAEG;IACK,MAAM,eAAe,CACzB,SAAgB,EAChB,gBAAqB,EACrB,MAAoB,EACpB,gBAAuB,EACvB,OAAwB,EAAA;AAExB,QAAA,MAAM,WAAW,GAAG,MAAM,OAAO,CAAC,GAAG,CAAC,SAAS,CAAC,GAAG,CAAC,OAAO,IAAI,KAAI;YAC/D,MAAM,QAAQ,GAAG,IAAI,CAAC,gBAAgB,CAAC,IAAI,CAAC,SAAS,CAAC;YACtD,MAAM,QAAQ,GAAG,CAAA,EAAG,IAAI,CAAC,IAAI,CAAA,CAAA,EAAI,QAAQ,CAAA,CAAE;;YAG3C,IAAI,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC,EAAE;AAC9B,gBAAA,OAAO,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,EAAE,EAAE,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;YACrE;;YAGA,MAAM,IAAI,GAAG,MAAM,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,KAAK,IAAI,CAAC,IAAI,CAAC;AAC1D,YAAA,IAAI,MAAW;AACf,YAAA,IAAI;gBACA,IAAI,CAAC,IAAI,EAAE,OAAO;oBAAE,MAAM,IAAI,KAAK,CAAC,CAAA,kBAAA,EAAqB,IAAI,CAAC,IAAI,CAAA,WAAA,CAAa,CAAC;gBAChF,MAAM,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC;gBACnC,MAAM,GAAG,MAAM,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC;AACnC,gBAAA,MAAM,GAAG,KAAK,CAAC,OAAO,CAAC,MAAM,CAAC,GAAG,MAAM,GAAG,CAAC,MAAM,CAAC;gBAClD,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,QAAQ,EAAE,MAAM,CAAC;YACxC;YAAE,OAAO,GAAG,EAAE;gBACV,MAAM,GAAG,EAAE,KAAK,EAAE,MAAM,CAAC,GAAG,CAAC,EAAE;YACnC;YAEA,OAAO,IAAI,CAAC,cAAc,CAAC,IAAI,CAAC,EAAE,EAAE,MAAM,CAAC;QAC/C,CAAC,CAAC,CAAC;AAEH,QAAA,MAAM,QAAQ,GAAG;YACb,KAAK,EAAE,MAAM,CAAC,SAAS;AACvB,YAAA,QAAQ,EAAE;AACN,gBAAA,GAAG,gBAAgB;AACnB,gBAAA;AACI,oBAAA,IAAI,EAAE,WAAW;AACjB,oBAAA,UAAU,EAAE,CAAC,gBAAgB,EAAE,UAAU,IAAI,SAAS,EAAE,GAAG,CAAC,CAAC,EAAO,MAAM;AACtE,wBAAA,EAAE,EAAE,EAAE,CAAC,EAAE,IAAI,EAAE,CAAC,YAAY;AAC5B,wBAAA,IAAI,EAAE,UAAU;AAChB,wBAAA,QAAQ,EAAE;4BACN,IAAI,EAAE,EAAE,CAAC,IAAI,IAAI,EAAE,CAAC,QAAQ,EAAE,IAAI;AAClC,4BAAA,SAAS,EAAE,IAAI,CAAC,gBAAgB,CAAC,EAAE,CAAC,SAAS,IAAI,EAAE,CAAC,QAAQ,EAAE,SAAS;AAC1E;AACJ,qBAAA,CAAC;AACL,iBAAA;AACD,gBAAA,GAAG;AACN,aAAA;AACD,YAAA,MAAM,EAAE,IAAI;YACZ,KAAK,EAAE,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,KAAK;SAC1C;QAED,MAAM,IAAI,CAAC,cAAc,CAAC,MAAM,EAAE,QAAQ,EAAE,OAAO,CAAC;IACxD;AAEA;;AAEG;IAEK,cAAc,CAAC,EAAU,EAAE,OAAY,EAAA;AAC3C,QAAA,OAAO,EAAE,IAAI,EAAE,MAAM,EAAE,YAAY,EAAE,EAAE,EAAE,OAAO,EAAE,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,EAAE;IAC/E;AAEQ,IAAA,cAAc,CAAC,KAAa,EAAA;QAChC,IAAI,CAAC,KAAK,EAAE,MAAM;AAAE,YAAA,OAAO,SAAS;QACpC,OAAO,KAAK,CAAC,GAAG,CAAC,CAAC,KAAK;AACnB,YAAA,IAAI,EAAE,UAAU;AAChB,YAAA,QAAQ,EAAE;gBACN,IAAI,EAAE,CAAC,CAAC,IAAI;gBACZ,WAAW,EAAE,CAAC,CAAC,WAAW;AAC1B,gBAAA,UAAU,EAAE,CAAC,CAAC,UAAU,IAAI,EAAE,IAAI,EAAE,QAAQ,EAAE,UAAU,EAAE,EAAE,EAAE,QAAQ,EAAE,EAAE;AAC7E;AACJ,SAAA,CAAC,CAAC;IACP;AAEQ,IAAA,gBAAgB,CAAC,GAAQ,EAAA;AAC7B,QAAA,IAAI,CAAC,GAAG;AAAE,YAAA,OAAO,IAAI;QACrB,IAAI,OAAO,GAAG,KAAK,QAAQ;AAAE,YAAA,OAAO,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC;AACvD,QAAA,MAAM,OAAO,GAAG,GAAG,CAAC,IAAI,EAAE;AAC1B,QAAA,IAAI,CAAC,OAAO;AAAE,YAAA,OAAO,IAAI;AACzB,QAAA,IAAI;AACA,YAAA,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC;AACnB,YAAA,OAAO,OAAO;QAClB;AAAE,QAAA,MAAM;AACJ,YAAA,OAAO,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC;QAClC;IACJ;uGAtPS,aAAa,EAAA,IAAA,EAAA,EAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,UAAA,EAAA,CAAA;AAAb,IAAA,OAAA,KAAA,GAAA,EAAA,CAAA,qBAAA,CAAA,EAAA,UAAA,EAAA,QAAA,EAAA,OAAA,EAAA,QAAA,EAAA,QAAA,EAAA,EAAA,EAAA,IAAA,EAAA,aAAa,cADA,MAAM,EAAA,CAAA;;2FACnB,aAAa,EAAA,UAAA,EAAA,CAAA;kBADzB,UAAU;mBAAC,EAAE,UAAU,EAAE,MAAM,EAAE;;;AC2ClC,MAAM,YAAY,GAAgB;;AAE9B,IAAA,MAAM,EAAE,EAAE;AACV,IAAA,SAAS,EAAE,mBAAmB;AAC9B,IAAA,YAAY,EAAE,EAAE;AAChB,IAAA,MAAM,EAAE,gCAAgC;AACxC,IAAA,KAAK,EAAE,EAAE;AACT,IAAA,SAAS,EAAE,EAAE;;AAGb,IAAA,IAAI,EAAE,UAAU;AAChB,IAAA,KAAK,EAAE,OAAO;AACd,IAAA,MAAM,EAAE,OAAO;AACf,IAAA,UAAU,EAAE,KAAK;;AAGjB,IAAA,SAAS,EAAE,uCAAuC;AAClD,IAAA,gBAAgB,EAAE,iBAAiB;AACnC,IAAA,cAAc,EAAE,WAAW;AAC3B,IAAA,iBAAiB,EAAE,kBAAkB;AACrC,IAAA,mBAAmB,EAAE,EAAE;AACvB,IAAA,YAAY,EAAE,8BAA8B;AAC5C,IAAA,KAAK,EAAE,SAAS;;AAGhB,IAAA,QAAQ,EAAE,EAAE;AACZ,IAAA,YAAY,EAAE,KAAK;AACnB,IAAA,MAAM,EAAE,KAAK;AACb,IAAA,SAAS,EAAE,KAAK;AAChB,IAAA,KAAK,EAAE,IAAI;CACd;AAEM,MAAM,WAAW,GAAG,WAAW,CAClC,EAAE,UAAU,EAAE,MAAM,EAAE,EACtB,SAAS,CAAC,YAAY,CAAC,EAEvB,YAAY,CAAC,CAAC,KAAK,MAAM;AACrB,IAAA,YAAY,EAAE,QAAQ,CAAC,MAAM,CAAC,CAAC,KAAK,CAAC,MAAM,EAAE,CAAC;IAC9C,eAAe,EAAE,QAAQ,CAAC,MAAM,KAAK,CAAC,QAAQ,EAAE,CAAC;AACpD,CAAA,CAAC,CAAC,EAEH,WAAW,CAAC,CAAC,KAAK,KAAI;AAClB,IAAA,MAAM,aAAa,GAAG,MAAM,CAAC,aAAa,CAAC;IAC3C,IAAI,eAAe,GAAwB,IAAI;AAG/C,IAAA,MAAM,kBAAkB,GAAG,CAAC,EAAU,EAAE,MAA4B,KAAI;QACpE,UAAU,CAAC,KAAK,EAAE,CAAC,KAAK,MAAM;AAC1B,YAAA,QAAQ,EAAE,KAAK,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,KAAK,EAAE,GAAG,EAAE,GAAG,CAAC,EAAE,GAAG,MAAM,EAAE,GAAG,CAAC;AAC1E,SAAA,CAAC,CAAC;AACP,IAAA,CAAC;AAED,IAAA,MAAM,oBAAoB,GAAG,CAAC,EAAU,EAAE,KAAa,KAAI;QACvD,UAAU,CAAC,KAAK,EAAE,CAAC,KAAK,MAAM;AAC1B,YAAA,QAAQ,EAAE,KAAK,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,CAAC,EAAE,KAAK,EAAE,GAAG,EAAE,GAAG,CAAC,EAAE,OAAO,EAAE,CAAC,CAAC,OAAO,GAAG,KAAK,EAAE,GAAG,CAAC;AAC3F,SAAA,CAAC,CAAC;AACP,IAAA,CAAC;IAED,OAAO;AACH,QAAA,YAAY,CAAC,MAAoB,EAAA;AAC7B,YAAA,MAAM,UAAU,GAAyB;gBACrC,GAAG,MAAM,CAAC,KAAK;gBACf,GAAG,MAAM,CAAC,MAAM;gBAChB,GAAG,MAAM,CAAC;aACb;AACD,YAAA,UAAU,CAAC,KAAK,EAAE,UAAiB,CAAC;QACxC,CAAC;QAED,WAAW,GAAA;AACP,YAAA,MAAM,MAAM,GAAG,CAAC,KAAK,CAAC,UAAU,EAAE;YAClC,UAAU,CAAC,KAAK,EAAE,EAAE,UAAU,EAAE,MAAM,EAAE,CAAC;QAC7C,CAAC;AAED,QAAA,UAAU,EAAE,MAAM,UAAU,CAAC,KAAK,EAAE,EAAE,MAAM,EAAE,CAAC,KAAK,CAAC,MAAM,EAAE,EAAE,CAAC;AAChE,QAAA,SAAS,EAAE,CAAC,MAAe,KAAK,UAAU,CAAC,KAAK,EAAE,EAAE,MAAM,EAAE,CAAC;AAE7D,QAAA,SAAS,EAAE,MAAM,UAAU,CAAC,KAAK,EAAE,EAAE,QAAQ,EAAE,EAAE,EAAE,CAAC;QAEpD,WAAW,GAAA;YACP,IAAI,eAAe,EAAE;gBACjB,eAAe,CAAC,WAAW,EAAE;gBAC7B,eAAe,GAAG,IAAI;YAC1B;YACA,aAAa,CAAC,UAAU,EAAE;AAE1B,YAAA,MAAM,QAAQ,GAAG,KAAK,CAAC,QAAQ,EAAE;AACjC,YAAA,MAAM,OAAO,GAAG,QAAQ,CAAC,MAAM,GAAG,CAAC;AACnC,YAAA,IAAI,OAAO,IAAI,CAAC,IAAI,QAAQ,CAAC,OAAO,CAAC,CAAC,IAAI,KAAK,WAAW,EAAE;gBACxD,MAAM,EAAE,GAAG,QAAQ,CAAC,OAAO,CAAC,CAAC,EAAE;AAC/B,gBAAA,oBAAoB,CAAC,EAAE,EAAE,2BAA2B,CAAC;gBACrD,kBAAkB,CAAC,EAAE,EAAE,EAAE,QAAQ,EAAE,KAAK,EAAE,CAAC;YAC/C;YACA,UAAU,CAAC,KAAK,EAAE,EAAE,YAAY,EAAE,KAAK,EAAE,CAAC;QAC9C,CAAC;QAED,MAAM,cAAc,CAAC,OAAe,EAAA;YAChC,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,IAAI,KAAK,CAAC,YAAY,EAAE;gBAAE;YAC7C,UAAU,CAAC,KAAK,EAAE,EAAE,YAAY,EAAE,IAAI,EAAE,CAAC;AAEzC,YAAA,MAAM,GAAG,GAAG,IAAI,IAAI,EAAE;YACtB,MAAM,OAAO,GAAgB,EAAE,IAAI,EAAE,MAAM,EAAE,OAAO,EAAE,EAAE,EAAE,MAAM,CAAC,UAAU,EAAE,EAAE,SAAS,EAAE,GAAG,EAAE;AAC/F,YAAA,MAAM,cAAc,GAAG,MAAM,CAAC,UAAU,EAAE;YAC1C,MAAM,YAAY,GAAgB,EAAE,IAAI,EAAE,WAAW,EAAE,OAAO,EAAE,EAAE,EAAE,EAAE,EAAE,cAAc,EAAE,SAAS,EAAE,GAAG,EAAE,QAAQ,EAAE,IAAI,EAAE;AAExH,YAAA,UAAU,CAAC,KAAK,EAAE,EAAE,QAAQ,EAAE,CAAC,GAAG,KAAK,CAAC,QAAQ,EAAE,EAAE,OAAO,EAAE,YAAY,CAAC,EAAE,CAAC;AAE7E,YAAA,MAAM,MAAM,GAAG;AACX,gBAAA,MAAM,EAAE,KAAK,CAAC,MAAM,EAAE;AACtB,gBAAA,SAAS,EAAE,KAAK,CAAC,SAAS,EAAE;AAC5B,gBAAA,YAAY,EAAE,KAAK,CAAC,YAAY,EAAE;AAClC,gBAAA,MAAM,EAAE,KAAK,CAAC,MAAM,EAAE;AACtB,gBAAA,KAAK,EAAE,KAAK,CAAC,KAAK,EAAE;AACpB,gBAAA,SAAS,EAAE,KAAK,CAAC,SAAS,EAAE;aAC/B;AAED,YAAA,MAAM,OAAO,GAAG;gBACZ,EAAE,IAAI,EAAE,QAAQ,EAAE,OAAO,EAAE,KAAK,CAAC,YAAY,EAAE,EAAE;AACjD,gBAAA,GAAG,KAAK,CAAC,QAAQ,EAAE,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC,IAAI,EAAE,OAAO,EAAE,CAAC,CAAC,OAAO,EAAE,CAAC,CAAC;AACjF,gBAAA,EAAE,IAAI,EAAE,MAAM,EAAE,OAAO;aAC1B;YAED,eAAe,GAAG,aAAa,CAAC,gBAAgB,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC,SAAS,CAAC;gBACxE,IAAI,EAAE,CAAC,KAAa,KAAK,oBAAoB,CAAC,cAAc,EAAE,KAAK,CAAC;AACpE,gBAAA,KAAK,EAAE,CAAC,GAAQ,KAAI;AAChB,oBAAA,IAAI,GAAG,CAAC,IAAI,KAAK,YAAY,IAAI,GAAG,CAAC,OAAO,EAAE,WAAW,EAAE,CAAC,QAAQ,CAAC,OAAO,CAAC;wBAAE;AAC/E,oBAAA,OAAO,CAAC,KAAK,CAAC,2BAA2B,EAAE,GAAG,CAAC;AAC/C,oBAAA,oBAAoB,CAAC,cAAc,EAAE,WAAW,CAAC;oBACjD,kBAAkB,CAAC,cAAc,EAAE,EAAE,QAAQ,EAAE,KAAK,EAAE,CAAC;oBACvD,UAAU,CAAC,KAAK,EAAE,EAAE,YAAY,EAAE,KAAK,EAAE,CAAC;gBAC9C,CAAC;gBACD,QAAQ,EAAE,MAAK;oBACX,kBAAkB,CAAC,cAAc,EAAE,EAAE,QAAQ,EAAE,KAAK,EAAE,CAAC;oBACvD,UAAU,CAAC,KAAK,EAAE,EAAE,YAAY,EAAE,KAAK,EAAE,CAAC;gBAC9C;AACH,aAAA,CAAC;QACN,CAAC;QAED,UAAU,GAAA;AACN,YAAA,IAAI,KAAK,CAAC,YAAY,EAAE,IAAI,KAAK,CAAC,QAAQ,EAAE,CAAC,MAAM,KAAK,CAAC,EAAE;gBACvD,MAAM,QAAQ,GAAG,EAAE,IAAI,EAAE,WAAW,EAAE,OAAO,EAAE,KAAK,CAAC,YAAY,EAAE,EAAE,EAAE,EAAE,MAAM,CAAC,UAAU,EAAE,EAAE,SAAS,EAAE,IAAI,IAAI,EAAE,EAAiB;gBACpI,UAAU,CAAC,KAAK,EAAE,EAAE,QAAQ,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC;YAC/C;QACJ;KACH;AACL,CAAC,CAAC;;MClHO,oBAAoB,CAAA;AACZ,IAAA,KAAK,GAAG,MAAM,CAAC,WAAW,CAAC;AAER,IAAA,eAAe;IAC7C,YAAY,GAAG,IAAI;AAE3B,IAAA,WAAA,GAAA;QACE,MAAM,CAAC,MAAK;YACV,MAAM,QAAQ,GAAG,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE;AACtC,YAAA,IAAI,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE;AACvB,gBAAA,IAAI,CAAC,YAAY,GAAG,IAAI;YAC1B;AACF,QAAA,CAAC,CAAC;IACJ;IAEA,kBAAkB,GAAA;AAChB,QAAA,IAAI,IAAI,CAAC,YAAY,EAAE;YACrB,IAAI,CAAC,cAAc,EAAE;AACrB,YAAA,IAAI,CAAC,YAAY,GAAG,KAAK;QAC3B;IACF;IAEQ,cAAc,GAAA;AACpB,QAAA,IAAI;AACF,YAAA,MAAM,SAAS,GAAG,IAAI,CAAC,eAAe,EAAE,aAAa;YACrD,IAAI,SAAS,EAAE;AACb,gBAAA,SAAS,CAAC,SAAS,GAAG,SAAS,CAAC,YAAY;YAC9C;QACF;QAAE,OAAO,GAAG,EAAE;AACZ,YAAA,OAAO,CAAC,KAAK,CAAC,eAAe,EAAE,GAAG,CAAC;QACrC;IACF;AAEU,IAAA,UAAU,CAAC,IAAU,EAAA;QAC7B,OAAO,IAAI,IAAI,CAAC,IAAI,CAAC,CAAC,kBAAkB,CAAC,OAAO,EAAE;AAChD,YAAA,IAAI,EAAE,SAAS;AACf,YAAA,MAAM,EAAE,SAAS;AACjB,YAAA,MAAM,EAAE,KAAK;AACd,SAAA,CAAC;IACJ;AAEU,IAAA,aAAa,CAAC,OAAe,EAAA;AACrC,QAAA,OAAO;AACJ,aAAA,OAAO,CAAC,gBAAgB,EAAE,qBAAqB;AAC/C,aAAA,OAAO,CAAC,KAAK,EAAE,MAAM;AACrB,aAAA,OAAO,CAAC,OAAO,EAAE,yCAAyC;AAC1D,aAAA,OAAO,CAAC,2BAA2B,EAAE,+CAA+C,CAAC;IAC1F;uGA/CW,oBAAoB,EAAA,IAAA,EAAA,EAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,SAAA,EAAA,CAAA;AAApB,IAAA,OAAA,IAAA,GAAA,EAAA,CAAA,oBAAA,CAAA,EAAA,UAAA,EAAA,QAAA,EAAA,OAAA,EAAA,QAAA,EAAA,IAAA,EAAA,oBAAoB,EAAA,YAAA,EAAA,IAAA,EAAA,QAAA,EAAA,iBAAA,EAAA,WAAA,EAAA,CAAA,EAAA,YAAA,EAAA,iBAAA,EAAA,KAAA,EAAA,IAAA,EAAA,SAAA,EAAA,CAAA,iBAAA,CAAA,EAAA,WAAA,EAAA,IAAA,EAAA,CAAA,EAAA,QAAA,EAAA,EAAA,EAAA,QAAA,EA7ErB,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiET,EAAA,CAAA,EAAA,QAAA,EAAA,IAAA,EAAA,MAAA,EAAA,CAAA,sEAAA,CAAA,EAAA,YAAA,EAAA,CAAA,EAAA,IAAA,EAAA,UAAA,EAAA,IAAA,EAlES,YAAY,EAAA,CAAA,EAAA,aAAA,EAAA,EAAA,CAAA,iBAAA,CAAA,IAAA,EAAA,CAAA;;2FA8EX,oBAAoB,EAAA,UAAA,EAAA,CAAA;kBAjFhC,SAAS;AACE,YAAA,IAAA,EAAA,CAAA,EAAA,QAAA,EAAA,iBAAiB,cACf,IAAI,EAAA,OAAA,EACP,CAAC,YAAY,CAAC,EAAA,QAAA,EACb,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;GAiET,EAAA,aAAA,EACc,iBAAiB,CAAC,IAAI,EAAA,MAAA,EAAA,CAAA,sEAAA,CAAA,EAAA;;sBAcpC,SAAS;uBAAC,iBAAiB;;;MCuCjB,qBAAqB,CAAA;AACb,IAAA,KAAK,GAAG,MAAM,CAAC,WAAW,CAAC;AACb,IAAA,UAAU;AAEjC,IAAA,UAAU,GAAG,MAAM,CAAC,EAAE,sDAAC;AACvB,IAAA,eAAe,GAAG,MAAM,CAAC,KAAK,2DAAC;AAEzC,IAAA,WAAA,GAAA;QACE,MAAM,CAAC,MAAK;YACV,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC,YAAY,EAAE,EAAE;AAC9B,gBAAA,UAAU,CAAC,MAAM,IAAI,CAAC,UAAU,EAAE,aAAa,EAAE,KAAK,EAAE,EAAE,CAAC,CAAC;YAC9D;AACF,QAAA,CAAC,CAAC;IACJ;AAEU,IAAA,QAAQ,CAAC,KAAY,EAAA;QAC7B,KAAK,CAAC,cAAc,EAAE;QACtB,IAAI,CAAC,WAAW,EAAE;IACpB;AAEU,IAAA,SAAS,CAAC,KAAoB,EAAA;QACtC,IAAI,KAAK,CAAC,GAAG,KAAK,OAAO,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE;YAC5C,KAAK,CAAC,cAAc,EAAE;YACtB,IAAI,CAAC,WAAW,EAAE;QACpB;IACF;IAEU,MAAM,GAAA;AACd,QAAA,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE;IAC1B;AAEU,IAAA,aAAa,CAAC,UAAkB,EAAA;AACxC,QAAA,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,UAAU,CAAC;AAC/B,QAAA,IAAI,CAAC,eAAe,CAAC,GAAG,CAAC,KAAK,CAAC;AAC/B,QAAA,IAAI,CAAC,UAAU,EAAE,aAAa,EAAE,KAAK,EAAE;IACzC;IAEQ,WAAW,GAAA;QACjB,MAAM,KAAK,GAAG,IAAI,CAAC,UAAU,EAAE,CAAC,IAAI,EAAE;QACtC,IAAI,CAAC,KAAK,IAAI,IAAI,CAAC,KAAK,CAAC,YAAY,EAAE;YAAE;AAEzC,QAAA,IAAI,CAAC,KAAK,CAAC,cAAc,CAAC,KAAK,CAAC;AAChC,QAAA,IAAI,CAAC,UAAU,CAAC,GAAG,CAAC,EAAE,CAAC;AAEvB,QAAA,IAAI,IAAI,CAAC,UAAU,EAAE,aAAa,EAAE;YAClC,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,KAAK,CAAC,MAAM,GAAG,MAAM;QACrD;IACF;uGA/CW,qBAAqB,EAAA,IAAA,EAAA,EAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,SAAA,EAAA,CAAA;AAArB,IAAA,OAAA,IAAA,GAAA,EAAA,CAAA,oBAAA,CAAA,EAAA,UAAA,EAAA,QAAA,EAAA,OAAA,EAAA,QAAA,EAAA,IAAA,EAAA,qBAAqB,EAAA,YAAA,EAAA,IAAA,EAAA,QAAA,EAAA,kBAAA,EAAA,WAAA,EAAA,CAAA,EAAA,YAAA,EAAA,YAAA,EAAA,KAAA,EAAA,IAAA,EAAA,SAAA,EAAA,CAAA,YAAA,CAAA,EAAA,WAAA,EAAA,IAAA,EAAA,CAAA,EAAA,QAAA,EAAA,EAAA,EAAA,QAAA,EAtHtB,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;GA8GT,EAAA,QAAA,EAAA,IAAA,EAAA,MAAA,EAAA,CAAA,wBAAA,CAAA,EAAA,YAAA,EAAA,CAAA,EAAA,IAAA,EAAA,UAAA,EAAA,IAAA,EA/GS,YAAY,8BAAE,WAAW,EAAA,EAAA,EAAA,IAAA,EAAA,WAAA,EAAA,IAAA,EAAA,EAAA,CAAA,aAAA,EAAA,QAAA,EAAA,8CAAA,EAAA,EAAA,EAAA,IAAA,EAAA,WAAA,EAAA,IAAA,EAAA,EAAA,CAAA,oBAAA,EAAA,QAAA,EAAA,8MAAA,EAAA,EAAA,EAAA,IAAA,EAAA,WAAA,EAAA,IAAA,EAAA,EAAA,CAAA,eAAA,EAAA,QAAA,EAAA,2CAAA,EAAA,EAAA,EAAA,IAAA,EAAA,WAAA,EAAA,IAAA,EAAA,EAAA,CAAA,oBAAA,EAAA,QAAA,EAAA,sGAAA,EAAA,EAAA,EAAA,IAAA,EAAA,WAAA,EAAA,IAAA,EAAA,EAAA,CAAA,OAAA,EAAA,QAAA,EAAA,qDAAA,EAAA,MAAA,EAAA,CAAA,MAAA,EAAA,UAAA,EAAA,SAAA,EAAA,gBAAA,CAAA,EAAA,OAAA,EAAA,CAAA,eAAA,CAAA,EAAA,QAAA,EAAA,CAAA,SAAA,CAAA,EAAA,EAAA,EAAA,IAAA,EAAA,WAAA,EAAA,IAAA,EAAA,EAAA,CAAA,MAAA,EAAA,QAAA,EAAA,yEAAA,EAAA,MAAA,EAAA,CAAA,eAAA,CAAA,EAAA,OAAA,EAAA,CAAA,UAAA,CAAA,EAAA,QAAA,EAAA,CAAA,QAAA,CAAA,EAAA,CAAA,EAAA,aAAA,EAAA,EAAA,CAAA,iBAAA,CAAA,IAAA,EAAA,CAAA;;2FAuHxB,qBAAqB,EAAA,UAAA,EAAA,CAAA;kBA1HjC,SAAS;+BACE,kBAAkB,EAAA,UAAA,EAChB,IAAI,EAAA,OAAA,EACP,CAAC,YAAY,EAAE,WAAW,CAAC,EAAA,QAAA,EAC1B,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;GA8GT,EAAA,aAAA,EACc,iBAAiB,CAAC,IAAI,EAAA,MAAA,EAAA,CAAA,wBAAA,CAAA,EAAA;;sBASpC,SAAS;uBAAC,YAAY;;;MCjGZ,mBAAmB,CAAA;AACX,IAAA,KAAK,GAAG,MAAM,CAAC,WAAW,CAAC;uGADnC,mBAAmB,EAAA,IAAA,EAAA,EAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,SAAA,EAAA,CAAA;AAAnB,IAAA,OAAA,IAAA,GAAA,EAAA,CAAA,oBAAA,CAAA,EAAA,UAAA,EAAA,QAAA,EAAA,OAAA,EAAA,QAAA,EAAA,IAAA,EAAA,mBAAmB,EAAA,YAAA,EAAA,IAAA,EAAA,QAAA,EAAA,gBAAA,EAAA,QAAA,EAAA,EAAA,EAAA,QAAA,EAtBpB,CAAA;;;;;;;;;;AAUT,EAAA,CAAA,EAAA,QAAA,EAAA,IAAA,EAAA,MAAA,EAAA,CAAA,2EAAA,CAAA,EAAA,YAAA,EAAA,CAAA,EAAA,IAAA,EAAA,UAAA,EAAA,IAAA,EAXS,YAAY,EAAA,EAAA,EAAA,IAAA,EAAA,WAAA,EAAA,IAAA,EAAE,oBAAoB,EAAA,QAAA,EAAA,iBAAA,EAAA,EAAA,EAAA,IAAA,EAAA,WAAA,EAAA,IAAA,EAAE,qBAAqB,EAAA,QAAA,EAAA,kBAAA,EAAA,CAAA,EAAA,aAAA,EAAA,EAAA,CAAA,iBAAA,CAAA,IAAA,EAAA,CAAA;;2FAuBxD,mBAAmB,EAAA,UAAA,EAAA,CAAA;kBA1B/B,SAAS;+BACE,gBAAgB,EAAA,UAAA,EACd,IAAI,EAAA,OAAA,EACP,CAAC,YAAY,EAAE,oBAAoB,EAAE,qBAAqB,CAAC,EAAA,QAAA,EAC1D,CAAA;;;;;;;;;;GAUT,EAAA,aAAA,EACc,iBAAiB,CAAC,IAAI,EAAA,MAAA,EAAA,CAAA,2EAAA,CAAA,EAAA;;;MCiC1B,mBAAmB,CAAA;AACX,IAAA,KAAK,GAAG,MAAM,CAAC,WAAW,CAAC;uGADnC,mBAAmB,EAAA,IAAA,EAAA,EAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,SAAA,EAAA,CAAA;AAAnB,IAAA,OAAA,IAAA,GAAA,EAAA,CAAA,oBAAA,CAAA,EAAA,UAAA,EAAA,QAAA,EAAA,OAAA,EAAA,QAAA,EAAA,IAAA,EAAA,mBAAmB,EAAA,YAAA,EAAA,IAAA,EAAA,QAAA,EAAA,gBAAA,EAAA,QAAA,EAAA,EAAA,EAAA,QAAA,EA9CpB,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAsCT,EAAA,CAAA,EAAA,QAAA,EAAA,IAAA,EAAA,MAAA,EAAA,CAAA,wBAAA,CAAA,EAAA,YAAA,EAAA,CAAA,EAAA,IAAA,EAAA,UAAA,EAAA,IAAA,EAvCS,YAAY,EAAA,CAAA,EAAA,aAAA,EAAA,EAAA,CAAA,iBAAA,CAAA,IAAA,EAAA,CAAA;;2FA+CX,mBAAmB,EAAA,UAAA,EAAA,CAAA;kBAlD/B,SAAS;AACE,YAAA,IAAA,EAAA,CAAA,EAAA,QAAA,EAAA,gBAAgB,cACd,IAAI,EAAA,OAAA,EACP,CAAC,YAAY,CAAC,EAAA,QAAA,EACb,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;GAsCT,EAAA,aAAA,EACc,iBAAiB,CAAC,IAAI,EAAA,MAAA,EAAA,CAAA,wBAAA,CAAA,EAAA;;;MCoC1B,eAAe,CAAA;AACP,IAAA,KAAK,GAAG,MAAM,CAAC,WAAW,CAAC;IAE9C,IAA+B,MAAM,CAAC,KAAmB,EAAA;AACvD,QAAA,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC,KAAK,CAAC;IAChC;IAEA,QAAQ,GAAA;AACN,QAAA,IAAI,CAAC,KAAK,CAAC,UAAU,EAAE;IACzB;uGATW,eAAe,EAAA,IAAA,EAAA,EAAA,EAAA,MAAA,EAAA,EAAA,CAAA,eAAA,CAAA,SAAA,EAAA,CAAA;AAAf,IAAA,OAAA,IAAA,GAAA,EAAA,CAAA,oBAAA,CAAA,EAAA,UAAA,EAAA,QAAA,EAAA,OAAA,EAAA,QAAA,EAAA,IAAA,EAAA,eAAe,EAAA,YAAA,EAAA,IAAA,EAAA,QAAA,EAAA,SAAA,EAAA,MAAA,EAAA,EAAA,MAAA,EAAA,QAAA,EAAA,EAAA,QAAA,EAAA,EAAA,EAAA,QAAA,EAtDhB,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6CT,EAAA,CAAA,EAAA,QAAA,EAAA,IAAA,EAAA,MAAA,EAAA,CAAA,+CAAA,CAAA,EAAA,YAAA,EAAA,CAAA,EAAA,IAAA,EAAA,UAAA,EAAA,IAAA,EA/DC,YAAY,EAAA,EAAA,EAAA,IAAA,EAAA,WAAA,EAAA,IAAA,EACZ,mBAAmB,EAAA,QAAA,EAAA,gBAAA,EAAA,EAAA,EAAA,IAAA,EAAA,WAAA,EAAA,IAAA,EACnB,mBAAmB,EAAA,QAAA,EAAA,gBAAA,EAAA,CAAA,EAAA,UAAA,EAGT;YACV,OAAO,CAAC,cAAc,EAAE;gBACtB,UAAU,CAAC,QAAQ,EAAE;AACnB,oBAAA,KAAK,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,SAAS,EAAE,6BAA6B,EAAE,eAAe,EAAE,aAAa,EAAE,CAAC;AAC/F,oBAAA,OAAO,CAAC,yCAAyC,EAC/C,KAAK,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,SAAS,EAAE,wBAAwB,EAAE,CAAC;iBAC7D,CAAC;gBACF,UAAU,CAAC,QAAQ,EAAE;AACnB,oBAAA,OAAO,CAAC,oCAAoC,EAC1C,KAAK,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,SAAS,EAAE,6BAA6B,EAAE,eAAe,EAAE,aAAa,EAAE,CAAC;iBAClG;aACF;AACF,SAAA,EAAA,aAAA,EAAA,EAAA,CAAA,iBAAA,CAAA,IAAA,EAAA,CAAA;;2FAuDU,eAAe,EAAA,UAAA,EAAA,CAAA;kBA5E3B,SAAS;+BACE,SAAS,EAAA,UAAA,EACP,IAAI,EAAA,OAAA,EACP;wBACP,YAAY;wBACZ,mBAAmB;wBACnB;qBACD,EAAA,aAAA,EACc,iBAAiB,CAAC,IAAI,EAAA,UAAA,EACzB;wBACV,OAAO,CAAC,cAAc,EAAE;4BACtB,UAAU,CAAC,QAAQ,EAAE;AACnB,gCAAA,KAAK,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,SAAS,EAAE,6BAA6B,EAAE,eAAe,EAAE,aAAa,EAAE,CAAC;AAC/F,gCAAA,OAAO,CAAC,yCAAyC,EAC/C,KAAK,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,SAAS,EAAE,wBAAwB,EAAE,CAAC;6BAC7D,CAAC;4BACF,UAAU,CAAC,QAAQ,EAAE;AACnB,gCAAA,OAAO,CAAC,oCAAoC,EAC1C,KAAK,CAAC,EAAE,OAAO,EAAE,CAAC,EAAE,SAAS,EAAE,6BAA6B,EAAE,eAAe,EAAE,aAAa,EAAE,CAAC;6BAClG;yBACF;qBACF,EAAA,QAAA,EACS,CAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6CT,EAAA,CAAA,EAAA,MAAA,EAAA,CAAA,+CAAA,CAAA,EAAA;;sBAYA,KAAK;uBAAC,EAAE,QAAQ,EAAE,IAAI,EAAE;;;ACtF3B;;AAEG;;ACFH;;AAEG;;;;"}